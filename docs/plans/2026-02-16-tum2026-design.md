# TUM 2026 — IT Admin Dashboard Design

## Overview
Multi-tenant IT administration dashboard for managing Microsoft 365 licensing, Active Directory users and groups via Microsoft Graph API.

## Stack
- **Framework:** Next.js 15 (App Router, Server Components)
- **UI:** Tailwind CSS v4 + shadcn/ui components (future)
- **Auth:** NextAuth.js v5 — Microsoft Entra ID SSO only
- **ORM:** Prisma 6 + PostgreSQL
- **Microsoft API:** @microsoft/microsoft-graph-client
- **Tables:** TanStack Table (future integration)
- **Charts:** Recharts (future integration)
- **Icons:** Lucide React

## Architecture
- **Auth:** SSO Microsoft only. Technicians log in with their corporate Microsoft account.
- **Tenants:** Manually loaded into database. Each tenant has Azure App Registration credentials.
- **AD Users/Groups:** Fetched on-demand from Graph API per tenant. NOT stored locally.
- **Licenses:** Fetched on-demand from Graph API per tenant. NOT stored locally.
- **Automation Tasks:** Stored in PostgreSQL per tenant.

## Database Models
- User (NextAuth managed)
- Account, Session, VerificationToken (NextAuth)
- Tenant (name, domain, Azure credentials, isActive)
- AutomationTask (per tenant, name, description, script, status)

## Pages (MVP)
- `/login` — Microsoft SSO sign-in
- `/dashboard` — Overview with stat cards
- `/dashboard/tenants` — Tenant list (CRUD)
- `/dashboard/tenants/[id]` — Tenant detail with tabs
- `/dashboard/tenants/[id]/users` — AD users via Graph API
- `/dashboard/tenants/[id]/groups` — AD groups via Graph API
- `/dashboard/tenants/[id]/licenses` — MS licenses via Graph API
- `/dashboard/tenants/[id]/tasks` — Automation tasks (DB)

## Auth Flow
1. Technician clicks "Sign in with Microsoft"
2. NextAuth Microsoft Entra provider handles OAuth
3. JWT session with userId
4. Middleware protects `/dashboard/*` routes

## Graph API Flow
Each tenant stores its own Azure App Registration credentials (tenantId, clientId, clientSecret).
On-demand: client credentials flow → access token → Graph API calls.
